import{a as d}from"./chunk-74TMIHW5.js";import{a as t}from"./chunk-GUI3OGMB.js";import{a as c}from"./chunk-GZR6PDGT.js";var y=e=>d(Object.values(e.productCategories)),I=e=>{let r=e.items;if(!r)return[];let p=e.marketingData?.coupon??void 0;return r.map((a,v)=>({item_id:a.productId,item_name:a.skuName,coupon:p,discount:a.price-a.sellingPrice,index:v,item_brand:a.additionalInfo.brandName??"",item_variant:a.id,price:a.price,quantity:a.quantity,...y(a)}))},o=c(null),n=c(!0),s=e=>r=>u(()=>f(()=>l(async()=>{o.value=await e(r)}))),g=t.create("deco-sites/std/loaders/vtex/cart.ts"),m=()=>u(()=>l(async()=>{o.value=await g()})),f=async e=>{if(o.value===null)throw new Error("Missing cart");return await e()},l=async e=>{try{return n.value=!0,await e()}finally{n.value=!1}},i=Promise.resolve(),u=e=>(i=i.then(e),i);typeof document<"u"&&(m(),document.addEventListener("visibilitychange",()=>document.visibilityState==="visible"&&m()));var x={loading:n,cart:o,updateItems:s(t.create("deco-sites/std/actions/vtex/cart/updateItems.ts")),removeAllItems:s(t.create("deco-sites/std/actions/vtex/cart/removeItems.ts")),addItems:s(t.create("deco-sites/std/actions/vtex/cart/addItems.ts")),addCouponsToCart:s(t.create("deco-sites/std/actions/vtex/cart/updateCoupons.ts")),changePrice:s(t.create("deco-sites/std/actions/vtex/cart/updateItemPrice.ts")),getCartInstallments:s(t.create("deco-sites/std/actions/vtex/cart/getInstallment.ts")),ignoreProfileData:s(t.create("deco-sites/std/actions/vtex/cart/updateProfile.ts")),removeAllPersonalData:s(t.create("deco-sites/std/actions/vtex/cart/updateUser.ts")),addItemAttachment:s(t.create("deco-sites/std/actions/vtex/cart/updateItemAttachment.ts")),removeItemAttachment:s(t.create("deco-sites/std/actions/vtex/cart/removeItemAttachment.ts")),sendAttachment:s(t.create("deco-sites/std/actions/vtex/cart/updateAttachment.ts")),simulate:t.create("deco-sites/std/actions/vtex/cart/simulation.ts"),mapItemsToAnalyticsItems:I},C=()=>x;export{C as a};
